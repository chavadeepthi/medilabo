<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Patient</title>
</head>
<body>
<h1>Edit Patient</h1>
<form th:action="@{/patients/edit/{id}(id=${patient.patientId})}" th:object="${patient}" method="post">

    <input type="hidden" th:field="*{patientId}" />
<h3>Patient Info</h3>
    <label>First Name: <input type="text" th:field="*{firstName}" /></label><br/>
    <label>Last Name: <input type="text" th:field="*{lastName}" /></label><br/>
    <label>DOB: <input type="date" th:field="*{dob}" /></label><br/>
    <label>Address: <input type="text" th:field="*{address}" /></label><br/>
    <label>Gender: <input type="text" th:field="*{gender}" /></label><br/>
    <label>Phone: <input type="text" th:field="*{phone}" /></label><br/>

    <h3>Add Medical Note</h3>
    <label>Physician: <input type="text" name="physician" /></label><br/>
    <label>Note: <textarea name="note"></textarea></label><br/>

    <button type="submit">Save</button>

</form>

<div>
    <!--    <a th:href="${gatewayBaseUrl + '/patients/all'}">Back to Patient List</a>-->
    <a th:href="@{/patients/all}">Back to Patient List</a>
</div>

<!-- âœ… Risk Result Display -->
<div th:if="${riskResult != null}" class="risk-result">
    <h3>Diabetes Risk Assessment</h3>
    <p><strong>Risk Level:</strong> <span th:text="${riskResult.riskLevel}"></span></p>
<!--    <p><strong>Trigger Count:</strong> <span th:text="${riskResult.triggerCount}"></span></p>-->
</div>

<div th:if="${riskError != null}" class="error">
    <p th:text="${riskError}"></p>
</div>

<!-- Display Medical Notes -->
<h3>Medical History Notes</h3>
<ul>
    <li th:each="n : ${notes}">
        <strong th:text="${n.physician}"></strong> -
        <span th:text="${n.createdAtFormatted}"></span>
        <pre th:text="${n.note}"></pre>
    </li>
</ul>

</body>
</html>